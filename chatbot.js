const responses = {
    juego: {
        keywords: ["chiste", "quieres jugar", "dime un chiste", "cuentame un chiste", "hazme reir", "me aburro", "dime algo divertido"],
        response: (() => {
            const chistes = [
            "¬øPor qu√© los paneles solares no van a fiestas? Porque siempre est√°n cargados.",
            "¬øQu√© hace una terma solar en el gimnasio? ¬°Calienta!",
            "¬øPor qu√© el sol no necesita WiFi? Porque ya tiene conexi√≥n directa con la energ√≠a.",
            "¬øQu√© le dijo un panel solar a otro? ¬°No te pongas opaco, que hoy es tu d√≠a brillante!",
            "¬øQu√© hace un t√©cnico solar cuando est√° triste? ¬°Se recarga al sol!",
            "¬øPor qu√© los paneles solares son buenos amigos? Porque siempre est√°n ah√≠ cuando brilla el sol.",
            "¬øC√≥mo se despide un sistema solar? ¬°Hasta la pr√≥xima instalaci√≥n!",
            "¬øQu√© hace una cocina solar en una parrillada? ¬°Brilla con luz propia!",
            "¬øPor qu√© el calentador solar nunca se enferma? Porque siempre est√° bien calientito.",
            "¬øQu√© le dice un inversor solar a la bater√≠a? ¬°Contigo cargo hasta mis sue√±os!",
            "¬øPor qu√© el sistema de bombeo solar no discute? Porque fluye con calma.",
            "¬øQu√© hace una terma solar cuando tiene fr√≠o? ¬°Se pone al sol rapidito!",
            "¬øCu√°l es el deporte favorito de los paneles solares? ¬°El atletismo‚Ä¶ siempre corriendo energ√≠a!",
            "¬øQu√© le dijo el cliente al t√©cnico solar? ¬°Inst√°lamelo r√°pido que ya me estoy iluminando de emoci√≥n!",
            "¬øPor qu√© no se pelean las termas? Porque siempre andan bien calentadas, pero nunca explotan.",
            "¬øQu√© hace una instalaci√≥n solar en su d√≠a libre? ¬°Toma sol‚Ä¶ como siempre!",
            "¬øPor qu√© la cocina solar es buena cocinera? Porque nunca se le apaga el fuego.",
            "¬øPor qu√© el panel solar es buen cantante? Porque siempre est√° en su punto de energ√≠a.",
            "¬øQu√© le dijo la bomba solar al pozo? ¬°No te preocupes, yo te levanto el √°nimo!",
            "¬øQu√© le dice una terma solar a otra al final del d√≠a? ¬°Nos vemos ma√±ana, a la misma temperatura!",
            "¬øC√≥mo sabes que un panel solar est√° enamorado? Porque brilla cuando la ve pasar.",
            "¬øPor qu√© los productos solares no tienen enemigos? Porque a todos los iluminan.",
            "¬øQu√© hacen los productos de SolarSur cuando se juntan? ¬°Forman una fiesta energ√©tica!",
            "¬øPor qu√© el calentador de piscina es tan popular? Porque siempre mantiene el ambiente c√°lido.",
            "¬øQu√© hacen las termas en invierno? Se r√≠en‚Ä¶ ¬°porque ya est√°n calientes!",
            "¬øPor qu√© el cliente se volvi√≥ fan del bombeo solar? Porque nunca m√°s tuvo que cargar baldes de agua."
            ];
        return () => chistes[Math.floor(Math.random() * chistes.length)];
        })()
    },

    saludo: {
        keywords: ["hola", "que tal", "buenas", "buen dia", "buenas tardes", "buenas noches", "saludos", "hey", "hi", "hello", "qu√© fue", "qu√© hay", "c√≥mo vas", "c√≥mo andas", "qu√© onda"],
        response: "¬°Hola! Soy el asistente virtual de SolarSur ‚òÄÔ∏è. ¬øEn qu√© puedo ayudarte hoy?"
    },

    despedida: {
        keywords: ["adios", "hasta luego", "chao", "nos vemos", "hasta pronto", "bye", "goodbye", "ya fue", "nos vidrios", "me jalo"],
        response: "¬°Hasta luego! Si necesitas algo m√°s, no dudes en preguntar."
    },

    ayuda: {
        keywords: ["ayuda", "necesito ayuda", "necesito asistencia", "ayuda tecnica"],
        response: "Claro, estoy aqu√≠ para ayudarte. ¬øQu√© necesitas saber?, puedes contactarnos y hacernos saber tu problema a trav√©s de nuestro n√∫mero de contacto: (052) 243863"
    },

    contacto: {
        keywords: ["contacto", "hablar con alguien", "atencion al cliente", "comunicacion", "contactar", "escribir", "enviar un mensaje", "enviar un correo", "correo electronico", "llamar", "telefono", "numero de telefono", "numero de contacto", "numero de atencion al cliente", "numero de soporte tecnico", "numero de asistencia", "numero de ayuda"],
        response: "Puedes contactarnos a trav√©s de nuestro correo electr√≥nico: solarsurperu1@gmail.com o por tel√©fono al (052) 243863. Estamos aqu√≠ para ayudarte."
    },

    precios: {
        keywords: ["precios", "costos", "tarifas", "valor", "costo", "cuanto vale", "cuanto es", "cuanto sale", "cuanto cobra", "cu√°nto est√°", "cu√°nto cuesta esa vaina", "cu√°nto me va a sangrar"],
        response: "Nuestros precios var√≠an seg√∫n el producto o servicio. Por favor, cont√°ctanos para m√°s informaci√≥n."
    },


    quejas: {
        keywords: ["queja", "reclamo", "problema", "insatisfaccion", "mala experiencia", "no estoy satisfecho", "no estoy contento", "queja sobre el servicio", "reclamo sobre el producto"],
        response: "Lamentamos que hayas tenido una mala experiencia. Por favor, env√≠anos un correo electr√≥nico con los detalles o directamente a nuestro n√∫mero de contacto: (052) 243863. Estamos aqu√≠ para ayudarte."
    },

    productos: {
        keywords: ["productos", "materiales", "nuestros productos", "cat√°logo", "art√≠culos", "mercanc√≠as", "existencias", "disponibilidad"],
        response: `Aqu√≠ tienes nuestra lista de productos disponibles en <b>SolarSur</b> ‚òÄÔ∏è<br><br>Podemos ayudarte con informaci√≥n y cotizaciones sobre:<br><ul style="list-style: disc; padding-left: 20px;"><li style="font-weight: bold;">Termas solares</li><li style="font-weight: bold;">Calentadores solares para piscina</li><li style="font-weight: bold;">Cocinas solares</li><li style="font-weight: bold;">Paneles solares</li><li style="font-weight: bold;">Sistemas de bombeo solar</li><li style="font-weight: bold;">Instalaci√≥n y mantenimiento</li></ul>¬øSobre cu√°l de estos productos te gustar√≠a recibir m√°s informaci√≥n? üòä`
    },

    servicios: {
        keywords: ["servicio", "servicios", "aplicaciones", "nuestros servicios", "servicio al cliente"],
        response: "Nuestros servicios incluyen soporte t√©cnico, mantenimiento y asistencia personalizada. ¬øQu√© necesitas?"
    },

    ayudaGeneral: {
        keywords: ["ayuda general", "preguntas frecuentes", "faq", "dudas"],
        response: "Puedes consultar nuestra secci√≥n de preguntas frecuentes en nuestro sitio web para obtener m√°s informaci√≥n."
    },

    contactoGeneral: {
        keywords: ["contacto general"],
        response: "Puedes contactarnos a trav√©s de nuestro correo electr√≥nico o por tel√©fono para recibir asistencia."
    },

    horarios: {
        keywords: ["horario", "horarios", "horario de atencion", "dias de atencion", "horas de trabajo", "horario de servicio", "horario de atencion al cliente", "horario de soporte tecnico", "horario de asistencia"],
        response: "Nuestro horario de atenci√≥n es de lunes a viernes de 9:00 a 18:00 horas."
    },

    ubicacion: {
        keywords: ["ubicacion", "direccion", "donde estamos", "donde encontrarnos", "nuestra ubicacion", "nuestra direccion", "donde se encuentra", "donde esta"],
        response: "Estamos ubicados en Tacna, Calle Arica N¬∫15."
    },

    garantia: {
        keywords: ["garantia", "politica de garantia", "cobertura de garantia", "plazo de garantia", "condiciones de garantia", "requisitos de garantia", "proceso de garantia", "reclamacion de garantia"],
        response: "Ofrecemos una garant√≠a de 1 a√±o en nuestros productos. Para m√°s informaci√≥n, consulta nuestra pol√≠tica de garant√≠a."
    },

    termas: {
        keywords: ["terma", "termas solares", "agua caliente", "ducha solar", "ahorro de luz"],
                response: `<p style="line-height: 1.3;">Aqu√≠ tienes nuestras termas solares y sus caracter√≠sticas principales:</p>
            <ul style="list-style: disc; padding-left: 20px;"><br>
                <li><b>Terma de 120L</b>: Para 4 personas. <span style="color:#001E83;">Espacio necesario: 1.10m x 2.00m</span></li>
                <li><b>Terma de 150L</b>: Para 5 personas. <span style="color:#001E83;">Espacio necesario: 1.30m x 2.00m</span></li>
                <li><b>Terma de 180L</b>: Para 6 personas. <span style="color:#001E83;">Espacio necesario: 1.60m x 2.00m</span></li>
                <li><b>Terma de 240L</b>: Para 8 personas. <span style="color:#001E83;">Espacio necesario: 2.10m x 2.00m</span></li>
                <li><b>Terma de 300L</b>: Para 10 personas. <span style="color:#001E83;">Espacio necesario: 2.60m x 2.00m</span></li>
                <li><b>Terma de 500L</b>: Para 15 personas. <span style="color:#001E83;">Espacio necesario: 4.00m x 2.00m</span></li>
            </ul>`
    },

    cotizar: {
        keywords: ["cotizar", "cotizacion", "precio", "presupuesto", "cuanto cuesta", "quiero cotizar"],
        response: "Para cotizar nuestros productos o servicios, puedes contactarnos por estos medios:\n\nüìû *Tel√©fono*: 908 823 893\nüì± *WhatsApp*: +51 908823893\n‚úâÔ∏è *Correo*: contacto@solarsur.com\nüìç *Ubicaci√≥n*: Tacna - Per√∫ - Calle Arica N¬∫15\n\n¬°Estaremos encantados de ayudarte con una propuesta personalizada! ‚òÄÔ∏è"
    },

    paneles: {
        keywords: ["panel solar", "paneles", "paneles solares", "energia solar", "electricidad solar", "fotovoltaico"],
        response: "Contamos con paneles solares de alta eficiencia para viviendas, comercios y zonas rurales. Te ayudar√°n a reducir tu consumo el√©ctrico y aprovechar la energ√≠a del sol."
    },

    piscina: {
        keywords: ["piscina", "calentador", "agua tibia", "calentar agua", "calentar piscina", "calentador solar piscina"],
        response: "Ofrecemos calentadores solares para piscinas que mantienen el agua templada durante todo el a√±o sin consumir electricidad ni gas. Ideales para hogares y hoteles."
    },

    instalacion: {
        keywords: ["instalacion", "instalar", "quien instala", "colocacion", "servicio de instalacion"],
        response: "Nosotros nos encargamos de la instalaci√≥n de paneles, termas solares y calentadores de piscina. Nuestro equipo t√©cnico garantiza un servicio r√°pido, seguro y certificado."
    },

    bombeo: {
        keywords: ["bombeo solar", "agua solar", "bomba de agua", "riego solar", "sistema de bombeo"],
        response: "Tambi√©n ofrecemos sistemas de bombeo solar ideales para zonas agr√≠colas o rurales sin acceso a red el√©ctrica."
    },

    certificacion: {
        keywords: ["certificacion", "homologacion", "cumple normas", "aprobado", "legal", "regulado"],
        response: "Todos nuestros productos cumplen con los est√°ndares de calidad y est√°n certificados para su uso en el Per√∫. Garantizamos tecnolog√≠a segura y eficiente."
    },


    duracion: {
        keywords: ["cuanto dura", "vida util", "durabilidad", "resistencia", "cuanto tiempo funciona"],
        response: "Nuestros equipos tienen una vida √∫til de m√°s de 10 a√±os con mantenimiento m√≠nimo. ¬°Una inversi√≥n a largo plazo!"
    },

    beneficios: {
        keywords: ["beneficios", "ventajas", "por que usar solar", "que gano", "que beneficio tiene"],
        response: "Ahorrar√°s dinero, reducir√°s tu impacto ambiental y mejorar√°s tu independencia energ√©tica. La energ√≠a solar es limpia, silenciosa y confiable."
    },

    mantenimiento: {
    keywords: ["mantenimiento", "limpieza", "cada cuanto se limpia", "se limpia", "se revisa", "revisiones", "cuidados", "cuanto mantenimiento necesita"],
    response: "Los sistemas solares requieren poco mantenimiento. Solo recomendamos limpiar los paneles o tubos de la terma 1 o 2 veces al a√±o para garantizar su eficiencia. ¬°Es muy sencillo!"
    },

    consumo: {
        keywords: ["cuanto consume", "consumo de energia", "gasta energia", "cuanto gasta", "consume electricidad", "sube la luz"],
        response: "Nuestros sistemas funcionan con energ√≠a solar, por lo tanto no consumen electricidad ni gas. ¬°Al contrario, ayudan a reducir tu factura!"
    },

    compatibilidad: {
        keywords: ["es compatible", "con que funciona", "funciona con tanque", "funciona con termo", "necesita algo adicional"],
        response: "Nuestros sistemas son compatibles con redes de agua tradicionales y no requieren gas ni energ√≠a el√©ctrica. Podemos adaptar la instalaci√≥n seg√∫n tu necesidad."
    },

    uso: {
        keywords: ["como se usa", "instrucciones", "manual", "guia", "dificil de usar", "facil de usar"],
        response: "Los sistemas solares son muy f√°ciles de usar. Se activan autom√°ticamente con la radiaci√≥n solar y no necesitas hacer ajustes diarios. Recibir√°s una gu√≠a de uso despu√©s de la instalaci√≥n."
    },

    recomendaciones: {
        keywords: ["que me recomiendan", "que me conviene", "mejor opcion", "mejor modelo", "modelo recomendado"],
        response: "Podemos ayudarte a elegir el producto ideal seg√∫n el tama√±o de tu familia, tu consumo y tu presupuesto. ¬øNos das m√°s detalles para asesorarte mejor?"
    },

    disponibilidad: {
        keywords: ["tienen en stock", "hay disponible", "puedo comprar", "disponible", "disponibilidad de producto"],
        response: "S√≠, tenemos disponibilidad inmediata de termas solares, paneles y calentadores de piscina. ¬øSobre cu√°l te gustar√≠a consultar?"
    },

    promociones: {
        keywords: ["promociones", "ofertas", "descuentos", "oferta especial", "rebajas", "hay promo"],
        response: "Actualmente tenemos promociones especiales en termas solares y combos con instalaci√≥n incluida. ¬°Preg√∫ntanos por los detalles!"
    },

    tiempoInstalacion: {
        keywords: ["cuanto demora", "cuanto tarda", "demora en instalar", "tiempo de instalacion", "rapido", "es rapido"],
        response: "La instalaci√≥n de una terma o panel solar toma generalmente entre 2 a 4 horas. Podemos coordinar seg√∫n tu disponibilidad."
    },

    lluvia: {
        keywords: ["lluvia", "dias nublados", "si no hay sol", "cuando llueve", "mal clima", "funciona sin sol"],
        response: "Nuestros equipos est√°n dise√±ados para funcionar incluso en d√≠as nublados. En caso de varios d√≠as sin sol, puedes complementarlos con energ√≠a auxiliar si lo deseas."
    },

    garantiaExtendida: {
        keywords: ["garantia extendida", "mas garantia", "garantia adicional", "puedo ampliar garantia"],
        response: "S√≠, puedes extender la garant√≠a hasta 3 a√±os dependiendo del producto. Cons√∫ltanos por las opciones disponibles."
    },

    cupones: {
    keywords: [
    "cupon", "cupones", "codigo de descuento", "codigo promocional", "descuento especial", "tienen cupones", "hay cupon", "hay codigo de descuento"],
    response: "Actualmente no contamos con cupones ni c√≥digos promocionales activos. Sin embargo, puedes consultar nuestras promociones vigentes escribi√©ndonos directamente. ‚òÄÔ∏è"
    },

    amistoso: {
    keywords: [
        "como estas", "que haces", "quien eres", "eres real", "eres un robot", "me caes bien",
        "me gusta este chat", "gracias por responder", "que bonito chatbot", "hablas bien", "te puedo hacer una pregunta"
    ],
    response: "¬°Gracias por tu mensaje! üòä Soy el asistente virtual de SolarSur y estoy aqu√≠ para ayudarte con todo lo relacionado a energ√≠a solar, termas, paneles y m√°s. ¬°Preg√∫ntame lo que necesites!"
    },
    
    humor: {
        keywords: ["jajaja", "jejeje", "jaja", "eres gracioso", "te pasas", "que gracioso", "buen chiste", "me haces reir", "te gusta bromear"],
        response: "üòÑ ¬°Me alegra sacarte una sonrisa! Aunque soy un bot solar, tambi√©n tengo buen humor. ¬øEn qu√© m√°s puedo ayudarte?"
    },

    curiosidad: {
    keywords: [
    "quien te creo", "de donde vienes", "como funcionas", "eres inteligente", "usas inteligencia artificial", "te programaron", "como sabes eso", "como aprendes"
    ],
    response: "Fui creado por SolarSur para ayudarte con todo sobre energ√≠a solar ‚òÄÔ∏è. Estoy entrenado para responder preguntas frecuentes y aprender cada d√≠a m√°s."
    },

    presente: {
        keywords: ["estas ahi", "hay alguien", "me puedes ayudar", "me escuchas", "puedo hablar contigo", "hola estas activo", "estoy solo aqui"],
        response: "¬°S√≠! Estoy aqu√≠ para ayudarte üòä. Preg√∫ntame sobre termas, paneles solares, calentadores o cualquier servicio que ofrecemos en SolarSur."
    },

    agradecimiento: {
    keywords: [
    "gracias", "muchas gracias", "te agradezco", "muy amable", "excelente atencion", "que buen servicio", "me ayudaste mucho"
    ],
    response: "¬°Gracias a ti por confiar en SolarSur! üåû Si necesitas algo m√°s, aqu√≠ estar√©."
    },

    elogio: {
    keywords: [
    "me encanta su empresa", "muy buen servicio", "que bonito dise√±o", "felicidades", "excelente trabajo", "todo funciona bien", "estan haciendo bien las cosas"
    ],
    response: "¬°Qu√© bonito leer eso! ‚òÄÔ∏è En SolarSur trabajamos con pasi√≥n para llevar energ√≠a limpia y soluciones reales a m√°s personas. ¬°Gracias por tu apoyo!"
    },

    confusion: {
    keywords: [
    "no se", "no entiendo", "no estoy seguro", "me puedes guiar", "que hago", "que opciones tengo", "que productos hay", "como empiezo", "me ayudas con algo"
    ],
    response: "¬°No te preocupes! Estoy aqu√≠ para ayudarte. Puedes preguntarme por termas solares, paneles solares, calentadores de piscina, precios, instalaci√≥n o promociones actuales. ¬øPor cu√°l quieres empezar?"
    },

    persona: {
        keywords: [
            "quiero hablar con una persona", "puedo hablar con un asesor", "hay alguien real", 
            "me atiende un humano", "quiero un humano", "quiero hablar con alguien de carne y hueso", 
            "pasa con alguien", "p√°same con alguien", "me atiende alguien o qu√©"
        ],
        response: "Claro. Puedes comunicarte directamente con nuestro equipo humano por WhatsApp al +51 908823893 o llamarnos al (052) 243863. ¬°Con gusto te atender√°n!"
    },

    identidad: {
    keywords: [
    "como te llamas", "quien eres", "cual es tu nombre", "tienes nombre", "eres un chatbot", "quien me responde"
    ],
    response: "¬°Hola! Soy el asistente virtual de SolarSur. Estoy aqu√≠ para ayudarte con lo que necesites sobre nuestros productos solares ‚òÄÔ∏è"
    },

    cambiarTema: {
    keywords: [
    "hablame mas", "quiero saber mas", "hablemos de otra cosa", "cambiar de tema", "cuentame algo mas", "continua", "que mas sabes", "quiero seguir hablando"
    ],
    response: "Claro, puedo contarte m√°s sobre nuestros productos o sobre energ√≠a solar en general."
    },

    ofensa: {
        keywords: [
            "tonto", "idiota", "estupido", "no sirves", "no sabes nada", "inutil", "que porqueria", 
            "me haces perder el tiempo", "eres una basura", "imbecil", "desgraciado", "maldito", "no sirves para nada"
        ],
        response: "üòî Lamento que te sientas as√≠. Estoy aqu√≠ para ayudarte con lo que necesites sobre nuestros productos y servicios solares. Si algo no te funciona, puedo intentar ayudarte mejor."
    },

    cocinas: {
        keywords: ["cocinas solares", "cocina solar", "cocina ecologica", "cocina con sol", "horno solar", "cocina", "cocinas"],
        response: "Nuestras cocinas solares permiten preparar alimentos utilizando solo la energ√≠a del sol. Son ideales para zonas rurales, campamentos y lugares con alta radiaci√≥n solar."
    },

    instalacionMantenimiento: {
        keywords: ["instalaci√≥n y mantenimiento", "servicio de instalaci√≥n", "servicio t√©cnico", "revisi√≥n t√©cnica", "soporte solar"],
        response: "Ofrecemos servicios completos de instalaci√≥n y mantenimiento para todos nuestros productos. Nuestro equipo t√©cnico est√° capacitado y certificado para garantizar una instalaci√≥n segura y eficiente."
    },

    solarGeneral: {
        keywords: [
            "energia solar", "sistema solar", "sistemas solares", "solar", "como funciona la energia solar", 
            "quiero saber sobre energia solar", "explicame la energia solar", "que es energia solar", 
            "como funciona un sistema solar", "informacion sobre energia solar"
        ],
        response: "La energ√≠a solar es una fuente limpia y renovable que aprovecha la radiaci√≥n del sol para generar electricidad o calentar agua. En SolarSur usamos esta tecnolog√≠a en termas, paneles, calentadores de piscina y m√°s. ¬øSobre qu√© producto te gustar√≠a saber m√°s? ‚òÄÔ∏è"
    },

    ecologia: {
    keywords: [
        "ecologico", "medio ambiente", "cuidar el planeta", "impacto ambiental", 
        "energ√≠a limpia", "ecoamigable", "ecologia", "contaminacion"
    ],
    response: "Nuestros productos est√°n dise√±ados para reducir la huella de carbono y proteger el medio ambiente. ¬°La energ√≠a solar es una opci√≥n sostenible y limpia!"
    },

    financiamiento: {
    keywords: [
        "financiamiento", "formas de pago", "cuotas", "credito", "se puede pagar en partes", 
        "pago en cuotas", "plan de pago", "puedo financiar", "puedo pagar despues"
    ],
    response: "Ofrecemos opciones de pago flexibles. Puedes consultar con nuestro equipo si deseas financiar tu compra o conocer nuestros planes de pago disponibles."
    },

    devolucion: {
    keywords: [
        "devolucion", "reembolso", "si no me gusta", "puedo devolver", "garantia de satisfaccion",
        "que pasa si no me gusta", "reclamo por devolucion", "quiero mi dinero"
    ],
    response: "Si no est√°s satisfecho con el producto, cont√°ctanos. Evaluamos cada caso y buscamos siempre una soluci√≥n justa y r√°pida."
    },


    demostracion: {
    keywords: [
        "tienen video", "puedo ver como funciona", "ejemplo", "demostracion", "caso real", 
        "video explicativo", "ver en funcionamiento"
    ],
    response: "Podemos enviarte videos de instalaci√≥n o funcionamiento de nuestros productos. Escr√≠benos por WhatsApp y te compartimos contenido √∫til."
    },

    comparacionProductos: {
    keywords: [
        "comparar productos", "diferencias entre productos", "cual me conviene", 
        "cual es mejor", "que producto elegir", "que producto recomiendan", 
        "diferencias entre paneles y termas", "paneles vs termas", 
        "cual es mejor terma o panel", "mejor producto solar", "comparo panel con terma"
    ],
    response: "Podemos ayudarte a comparar nuestros productos solares. Por ejemplo:\n\n- üî• *Termas solares*: ideales para calentar agua para duchas familiares.\n- ‚ö° *Paneles solares*: generan electricidad limpia para tu hogar o negocio.\n- üíß *Calentadores solares de piscina*: mantienen el agua tibia todo el a√±o sin consumo de energ√≠a.\n\nCu√©ntame qu√© necesitas y te recomiendo la mejor opci√≥n seg√∫n tu caso üòä."
    },

    queEsTerma: {
    keywords: [
        "que es una terma solar", "como funciona una terma solar", "terma solar concepto", 
        "explicame terma solar", "que hace una terma solar"
    ],
    response: "Una *terma solar* es un sistema que calienta agua utilizando la energ√≠a del sol. Funciona mediante tubos o paneles solares que absorben el calor solar y lo transfieren al agua. Es ideal para duchas, lavabos y uso dom√©stico sin necesidad de electricidad ni gas."
    },

    queEsPanel: {
    keywords: [
        "que es un panel solar", "como funciona un panel solar", "panel solar concepto", 
        "explicame panel solar", "panel solar definicion"
    ],
    response: "Un *panel solar* convierte la luz del sol en electricidad mediante c√©lulas fotovoltaicas. Es una forma limpia y sostenible de generar energ√≠a para casas, negocios y zonas rurales."
    },

    queEsCocina: {
    keywords: [
        "que es una cocina solar", "como funciona una cocina solar", "cocina solar concepto", 
        "explicame cocina solar", "definicion cocina solar"
    ],
    response: "Una *cocina solar* permite preparar alimentos usando solo la energ√≠a del sol. Funciona como un horno cerrado que concentra la radiaci√≥n solar. Es ecol√≥gica, segura y √∫til en lugares sin acceso a gas o electricidad."
    },

    queEsBombeo: {
    keywords: [
        "que es un sistema de bombeo solar", "bombeo solar concepto", "como funciona el bombeo solar",
        "sistema de bombeo solar explicacion", "para que sirve el bombeo solar"
    ],
    response: "El *bombeo solar* es un sistema que usa energ√≠a solar para extraer y mover agua, ideal para riego agr√≠cola, zonas rurales o viviendas alejadas. Funciona con paneles solares conectados a bombas de agua."
    },

    queEsCalentadorPiscina: {
    keywords: [
        "que es un calentador solar de piscina", "como funciona el calentador de piscina solar", 
        "calentador de piscina solar concepto", "explicame calentador de piscina solar"
    ],
    response: "Un *calentador solar de piscina* utiliza la energ√≠a del sol para calentar el agua de una piscina. Funciona con colectores solares por donde circula el agua que se calienta naturalmente. Es eficiente y no requiere electricidad."
    },

    conceptosGenerales: {
    keywords: [
        "que es la energia solar", "energia solar definicion", "como funciona la energia solar",
        "que es un sistema solar", "sistema solar termico", "sistema solar fotovoltaico",
        "diferencia entre energia solar y electrica", "energ√≠a renovable", "que es energia limpia"
    ],
    response: `
        <b>üîÜ ¬øQu√© es la energ√≠a solar?</b><br>
        La energ√≠a solar es una fuente de energ√≠a renovable que se obtiene del sol. Puede ser usada para generar electricidad (paneles solares fotovoltaicos) o para calentar agua (sistemas solares t√©rmicos como las termas o calentadores de piscina).<br><br>
        <b>‚úÖ Beneficios:</b> no contamina, es inagotable, reduce tu consumo el√©ctrico y es ideal para zonas alejadas de la red el√©ctrica.<br><br>
        ¬øQuieres saber c√≥mo se aplica esta tecnolog√≠a en nuestros productos? Preg√∫ntame sobre termas, paneles, bombas o cocinas solares. üòä
    `
    },

    promos: {
        keywords: [
            "hay alguna promo", "hay promociones", "promocion activa", "tienen descuentos", 
            "descuento", "rebaja", "hay oferta", "oferta del mes", "que promociones hay", 
            "hay paquetes", "combo especial", "combo instalaci√≥n", "precio con descuento", 
            "hay algo barato", "algo con rebajita", "est√° en oferta", "alguna ganga", "tienen combito", "promo", "promos" , "promociones", "promocion"
        ],
        response: "Actualmente no contamos con promociones activas. Sin embargo, puedes consultarnos por una cotizaci√≥n personalizada, y con gusto te ofreceremos la mejor opci√≥n seg√∫n tu necesidad ‚òÄÔ∏è"
    },

    terma120: {
        keywords: [
        "terma 120", "terma de 120 litros", "terma para 4 personas", "terma chica", 
        "la de 120", "la m√°s peque√±a", "la m√°s chiquita", "terma b√°sica", "terma econ√≥mica", "terma de 120L", "120"
        ],
        response: `
        üîÜ <b>Terma solar de 120L</b><br>
        ‚úÖ <b>Capacidad:</b> 120 litros (ideal para 4 personas)<br>
        üîß <b>Tubos:</b> 12 tubos al vac√≠o de 58mm x 1,80m<br>
        üß± <b>Materiales:</b> Tanque interno de acero inoxidable<br>
        ‚ö° <b>Accesorios:</b> Base de soporte en inox, √°nodo de sacrificio y resistencia el√©ctrica<br>
        üìè <b>Espacio requerido:</b> 1.10m x 2.00m<br>
        üíß <b>Incluye:</b> Accesorios e instalaci√≥n<br>
        ‚òÄÔ∏è ¬°Perfecta para familias peque√±as que quieren ahorrar luz sin complicaciones!
        `
    },

    terma150: {
        keywords: [
        "terma 150", "terma de 150 litros", "terma para 5 personas", "terma mediana", 
        "la de 150", "terma intermedia", "terma familiar", "150"
        ],
        response: `
        üîÜ <b>Terma solar de 150L</b><br>
        ‚úÖ <b>Capacidad:</b> 150 litros (ideal para 5 personas)<br>
        üîß <b>Tubos:</b> 15 tubos al vac√≠o de 58mm x 1,80m<br>
        üß± <b>Materiales:</b> Tanque interno de acero inoxidable<br>
        ‚ö° <b>Accesorios:</b> Base de soporte en inox, √°nodo de sacrificio y resistencia el√©ctrica<br>
        üìè <b>Espacio requerido:</b> 1.30m x 2.00m<br>
        üíß <b>Incluye:</b> Accesorios e instalaci√≥n<br>
        ‚òÄÔ∏è Ideal para casas medianas o familias que se dan sus duchitas con gusto üòâ
        `
    },

    terma180: {
        keywords: [
        "terma 180", "terma de 180 litros", "terma para 6 personas", 
        "la de 180", "terma grande", "terma familiar grande", "180"
        ],
        response: `
        üîÜ <b>Terma solar de 180L</b><br>
        ‚úÖ <b>Capacidad:</b> 180 litros (ideal para 6 personas)<br>
        üîß <b>Tubos:</b> 18 tubos al vac√≠o de 58mm x 1,80m<br>
        üß± <b>Materiales:</b> Tanque interno de acero inoxidable<br>
        ‚ö° <b>Accesorios:</b> Base de soporte en inox, √°nodo de sacrificio y resistencia el√©ctrica<br>
        üìè <b>Espacio requerido:</b> 1.60m x 2.00m<br>
        üíß <b>Incluye:</b> Accesorios e instalaci√≥n<br>
        üî• ¬°Buena opci√≥n para familias numerosas o con alto consumo de agua caliente!
        `
    },

    terma240: {
        keywords: [
        "terma 240", "terma de 240 litros", "terma para 8 personas", 
        "la de 240", "terma grandaza", "terma de barrio", "para familia grande", "240"
        ],
        response: `
        üîÜ <b>Terma solar de 240L</b><br>
        ‚úÖ <b>Capacidad:</b> 240 litros (ideal para 8 personas)<br>
        üîß <b>Tubos:</b> 24 tubos al vac√≠o de 58mm x 1,80m<br>
        üß± <b>Materiales:</b> Tanque interno de acero inoxidable<br>
        ‚ö° <b>Accesorios:</b> Base de soporte en inox, √°nodo de sacrificio y resistencia el√©ctrica<br>
        üìè <b>Espacio requerido:</b> 2.10m x 2.00m<br>
        üíß <b>Incluye:</b> Accesorios e instalaci√≥n<br>
        üè† ¬°Perfecta para casas con muchos integrantes o para peque√±os negocios como hospedajes!
        `
    },

    terma300: {
        keywords: [
        "terma 300", "terma de 300 litros", "terma para 10 personas", 
        "la de 300", "terma pro", "terma para hospedaje", "terma de lujo", "300"
        ],
        response: `
        üîÜ <b>Terma solar de 300L</b><br>
        ‚úÖ <b>Capacidad:</b> 300 litros (ideal para 10 personas)<br>
        üîß <b>Tubos:</b> 30 tubos al vac√≠o de 58mm x 1,80m<br>
        üß± <b>Materiales:</b> Tanque interno de acero inoxidable<br>
        ‚ö° <b>Accesorios:</b> Base de soporte en inox, √°nodo de sacrificio y resistencia el√©ctrica<br>
        üìè <b>Espacio requerido:</b> 2.60m x 2.00m<br>
        üíß <b>Incluye:</b> Accesorios e instalaci√≥n<br>
        üîù ¬°Una terma con potencia! Perfecta para hoteles, negocios o familias numerosas.
        `
    },

    terma500: {
        keywords: [
        "terma 500", "terma de 500 litros", "terma para 15 personas", 
        "la de 500", "terma para negocio", "terma industrial", "terma recontra grande", "500"
        ],
        response: `
        üîÜ <b>Terma solar de 500L</b><br>
        ‚úÖ <b>Capacidad:</b> 500 litros (ideal para 15 personas o m√°s)<br>
        üîß <b>Tubos:</b> 50 tubos al vac√≠o de 58mm x 1,80m<br>
        üß± <b>Materiales:</b> Tanque interno de acero inoxidable<br>
        ‚ö° <b>Accesorios:</b> Base de soporte en inox, √°nodo de sacrificio y resistencia el√©ctrica<br>
        üìè <b>Espacio requerido:</b> 4.00m x 2.00m<br>
        üíß <b>Incluye:</b> Accesorios e instalaci√≥n<br>
        üí™ Esta es la top de las termas ‚òÄÔ∏è Perfecta para hoteles, empresas o casas grandes.
        `
    },



    termaBeneficios: {
        keywords: [
            "ventajas de la terma", "beneficios de la terma", "por que usar terma solar", 
            "ahorra luz", "ahorra recibo", "me conviene la terma", 
            "vale la pena la terma", "es buena la terma", "que gano con la terma",
            "pa que sirve la terma", "para que sirve la terma", "me rinde la terma", "vale la inversion la terma",
            "por que deberia tener terma", "me ayuda la terma", "sirve la terma"
        ],
        response: "<b>‚úÖ Beneficios de usar una terma solar:</b><br>üîÜ Agua caliente todo el a√±o sin usar electricidad ni gas.<br>üí∏ Ahorro mensual en tu recibo de luz o gas.<br>üå± Cero contaminaci√≥n, energ√≠a limpia y renovable.<br>üõ†Ô∏è Bajo mantenimiento, f√°cil de usar y resistente.<br>üë®‚Äçüë©‚Äçüëß Ideal para familias y viviendas urbanas o rurales."
    },

    panelBeneficios: {
        keywords: [
            "beneficios del panel solar", "para que sirve el panel", 
            "por que poner paneles", "ventajas del panel solar", 
            "vale la pena panel solar", "ahorro con panel", "me ayuda el panel",
            "me conviene poner panel", "sirve el panel", "uso del panel solar"
        ],
        response: "<b>‚ö° Beneficios de instalar paneles solares:</b><br>üåû Generas tu propia electricidad gratis.<br>üìâ Reduces tu factura el√©ctrica mes a mes.<br>üí™ Independencia energ√©tica en zonas urbanas o rurales.<br>üåø Ayudas al medio ambiente usando energ√≠a limpia.<br>üè° Aumenta el valor de tu vivienda o negocio."
    },

    piscinaBeneficios: {
    keywords: [
        "beneficios del calentador de piscina", "para que sirve el calentador de piscina", 
        "por que calentar la piscina", "vale la pena el calentador de piscina", "ventajas de calentar la piscina",
        "sirve calentar la piscina", "ventajas del agua caliente en piscina"
    ],
    response: "<b>üíß Beneficios del calentador solar para piscina:</b><br>üèñÔ∏è Agua tibia todo el a√±o sin usar electricidad.<br>üòå M√°s comodidad para ni√±os, adultos mayores y terapias.<br>üí∏ Ahorro total en gas o corriente.<br>üîß Instalaci√≥n sencilla y mantenimiento m√≠nimo.<br>‚ôªÔ∏è Ecol√≥gico, silencioso y sin humo."
    },

    cocinaMateriales: {
    keywords: [
        "material de la cocina solar", "con que esta hecha la cocina", 
        "estructura cocina solar", "que usa la cocina solar", 
        "de que es la cocina solar", "componentes de la cocina solar",
        "como es la cocina solar", "de que partes esta hecha"
    ],
    response: "<b>üç≤ Materiales de nuestras cocinas solares:</b><br>üîç Superficie reflectante de aluminio pulido o espejo.<br>üî• C√°mara t√©rmica interna de acero o hierro esmaltado.<br>ü™ü Vidrio templado como cubierta transparente.<br>üì¶ Estructura de acero y aislantes t√©rmicos.<br>‚ôªÔ∏è Todo dise√±ado para captar y conservar el calor del sol."
    },

    cocinaBeneficios: {
        keywords: [
            "ventajas de la cocina solar", "beneficios de usar cocina solar", 
            "por que cocinar con sol", "sirve la cocina solar", "ahorro cocina solar",
            "me conviene la cocina solar", "vale la pena la cocina solar"
        ],
        response: "<b>üî• Beneficios de la cocina solar:</b><br>üç≥ Cocinas sin gas, sin le√±a y sin contaminar.<br>üí∞ Ahorro total en combustible.<br>üåΩ Conserva mejor el sabor y nutrientes de tus alimentos.<br>üèïÔ∏è Perfecta para zonas rurales, campings o desastres naturales.<br>üßØ Segura, no hay riesgo de explosi√≥n ni quemaduras graves."
    },

    bombeoMateriales: {
        keywords: [
            "material del sistema de bombeo solar", "como es el sistema de bombeo", 
            "de que esta hecho el bombeo solar", "componentes de bombeo", "estructura bombeo solar",
            "que trae la bomba solar", "partes del bombeo solar"
        ],
        response: "<b>üîß Componentes de un sistema de bombeo solar:</b><br>üîã Paneles solares fotovoltaicos de alta eficiencia.<br>üö∞ Bomba de agua sumergible o de superficie (seg√∫n el caso).<br>üîå Controlador de carga o variador para controlar el flujo.<br>ü™õ Cableado y accesorios resistentes a intemperie.<br>‚úÖ Todo funciona sin necesidad de red el√©ctrica convencional."
    },

    bombeoBeneficios: {
        keywords: [
            "para que sirve el bombeo solar", "beneficios del bombeo solar", 
            "por que usar bomba solar", "ventajas del bombeo solar", "sirve para riego",
            "bombeo para ganado", "bombeo para chacra"
        ],
        response: "<b>üöø Beneficios del bombeo solar:</b><br>üöú Ideal para riego agr√≠cola, uso en granjas o viviendas rurales.<br>üí∏ No consume electricidad ni gasolina.<br>üîã Funciona de forma autom√°tica con energ√≠a solar.<br>üõ†Ô∏è Requiere poco mantenimiento y tiene larga duraci√≥n.<br>‚ôªÔ∏è Alternativa ecol√≥gica, limpia y confiable."
    },

    energiaFotovoltaica: {
        keywords: [
            "que es energia fotovoltaica", "energia solar fotovoltaica", "como funciona energia fotovoltaica", 
            "paneles fotovoltaicos", "sistema fotovoltaico", "definicion fotovoltaico"
        ],
        response: `
        <b>üîã ¬øQu√© es la energ√≠a fotovoltaica?</b><br>
        Es la tecnolog√≠a que convierte la luz del sol directamente en electricidad mediante <b>celdas fotovoltaicas</b> ubicadas en los paneles solares.<br><br>
        ‚úÖ Ideal para generar energ√≠a el√©ctrica en casas, negocios o zonas rurales sin acceso a red p√∫blica.
        `
    },

    energiaTermica: {
        keywords: [
            "energia solar termica", "que es energia termica", "sistema solar termico", 
            "calor solar", "agua caliente con energia solar", "como funciona sistema termico"
        ],
        response: `
        <b>üå°Ô∏è ¬øQu√© es la energ√≠a solar t√©rmica?</b><br>
        Es el uso del calor del sol para calentar agua u otros fluidos. Se emplea en sistemas como las <b>termas solares</b> o <b>calentadores de piscina</b>.<br><br>
        ‚úÖ Ahorra energ√≠a el√©ctrica o gas y es ideal para duchas, cocinas o calefacci√≥n.
        `
    },

    energiaRenovable: {
        keywords: [
            "que es energia renovable", "fuentes renovables", "energia limpia", 
            "tipos de energia renovable", "beneficios energia renovable"
        ],
        response: `
        <b>‚ôªÔ∏è ¬øQu√© es la energ√≠a renovable?</b><br>
        Son fuentes de energ√≠a que se obtienen de la naturaleza y se regeneran constantemente: como el <b>sol, el viento o el agua</b>.<br><br>
        ‚úÖ No contaminan, no se agotan y ayudan a cuidar el medio ambiente.
        `
    },

    bateriaSolar: {
        keywords: [
            "baterias para paneles", "bateria solar", "almacenamiento solar", 
            "panel con bateria", "guardar energia solar", "como almacenar energia solar"
        ],
        response: `
        <b>üîã ¬øQu√© es una bater√≠a solar?</b><br>
        Es un dispositivo que <b>almacena la electricidad</b> generada por los paneles solares para usarla cuando no hay sol (de noche o en d√≠as nublados).<br><br>
        ‚úÖ Ideal para sistemas Off-Grid o para asegurar energ√≠a continua.
        `
    },

    inversorSolar: {
        keywords: [
            "que es un inversor solar", "para que sirve el inversor", "inversor de corriente solar", 
            "cambiar corriente panel", "cc a ca solar"
        ],
        response: `
        <b>üîÑ ¬øQu√© es un inversor solar?</b><br>
        Es el dispositivo que <b>convierte la electricidad de corriente continua (CC)</b> generada por los paneles solares, en <b>corriente alterna (CA)</b> que usan los electrodom√©sticos.<br><br>
        ‚úÖ Es esencial para que la energ√≠a solar pueda usarse en casa o negocio.
        `
    },

    eficienciaEnergetica: {
        keywords: [
            "eficiencia energetica", "como ahorrar energia", "uso eficiente de energia", 
            "consumo eficiente", "que es eficiencia energetica"
        ],
        response: `
        <b>üí° ¬øQu√© es la eficiencia energ√©tica?</b><br>
        Es el uso inteligente de la energ√≠a para lograr el mismo resultado <b>con menor consumo</b>.<br><br>
        ‚úÖ Nuestros productos solares te ayudan a ahorrar energ√≠a y dinero, sin perder comodidad.
        `
    },

    medicionSolar: {
        keywords: [
            "como se mide la energia solar", "medida energia solar", "irradiancia solar", 
            "cuanta energia genera el sol", "sol produce energia"
        ],
        response: `
        <b>üîç ¬øC√≥mo se mide la energ√≠a solar?</b><br>
        La energ√≠a del sol se mide en <b>watts por metro cuadrado (W/m¬≤)</b> usando equipos como piran√≥metros.<br><br>
        ‚úÖ Esta medici√≥n ayuda a saber cu√°nta electricidad pueden generar los paneles solares en tu zona.
        `
    },

    durabilidadSolar: {
        keywords: [
            "cuanto dura un panel solar", "vida util terma", "cuanto tiempo dura", 
            "duracion productos solares", "vida util energia solar"
        ],
        response: `
        <b>‚è≥ Durabilidad de productos solares:</b><br>
        - Paneles solares: hasta 25 a√±os o m√°s.<br>
        - Termas solares: entre 10 y 15 a√±os.<br>
        - Bombas y calentadores: seg√∫n uso, entre 8 y 12 a√±os.<br><br>
        ‚úÖ Todos nuestros productos cuentan con garant√≠a y materiales de alta calidad.
        `
    },

    impactoEconomico: {
        keywords: [
            "cuanto puedo ahorrar", "impacto economico energia solar", 
            "ahorro mensual", "cuanto gasto menos", "vale la pena economicamente"
        ],
        response: `
        <b>üìâ ¬øQu√© ahorro genera la energ√≠a solar?</b><br>
        Puedes reducir tu recibo de luz o gas hasta en un <b>70% o m√°s</b>.<br><br>
        ‚úÖ Aunque la inversi√≥n inicial puede ser mayor, el retorno se da en pocos a√±os, y luego ¬°es puro ahorro!
        `
    },

    certificacionProductos: {
        keywords: [
            "estan certificados", "certificacion productos solares", 
            "cumplen normas", "certificaciones", "normas tecnicas"
        ],
        response: `
        <b>üìë Certificaci√≥n de nuestros productos:</b><br>
        Todos nuestros equipos cumplen <b>normas internacionales de calidad</b> (ISO, CE) y las exigencias t√©cnicas nacionales.<br><br>
        ‚úÖ Seguridad, rendimiento y garant√≠a asegurados.
        `
    }








    












};


let chatbotIniciado = false;



// Normaliza el texto del usuario para ignorar tildes y signos
function normalizarTexto(texto) {
    return texto
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .replace(/[¬ø?¬°!.,]/g, "")
        .trim();
}

// Funci√≥n para manejar el mensaje del usuario
function handleUserMessage(userMessage) {
    const mensajeNormalizado = normalizarTexto(userMessage);
    let defaultResponse = "Lo siento, no entiendo tu pregunta. Por favor, intenta de nuevo.";

    for (const category in responses) {
        const data = responses[category];
        for (const keyword of data.keywords) {
            if (mensajeNormalizado.includes(normalizarTexto(keyword))) {
                // ‚úîÔ∏è Esta l√≠nea se asegura de que si es funci√≥n, se ejecuta
                return typeof data.response === "function"
                    ? data.response()
                    : data.response;
            }
        }
    }

    return defaultResponse;
}





// Vincula el chatbot con el HTML
document.addEventListener("DOMContentLoaded", () => {
    const chatButton = document.getElementById("chat-button");
    const chatContainer = document.getElementById("chat-container");
    const chatMessages = document.getElementById("chat-messages");
    const userInput = document.getElementById("user-input");
    const sendBtn = document.getElementById("send-btn");

chatButton.addEventListener("click", () => {
    if (chatContainer.classList.contains("visible")) {
        chatContainer.classList.remove("visible");
        setTimeout(() => { chatContainer.style.display = "none"; }, 250);
    } else {
        chatContainer.style.display = "flex";
        setTimeout(() => { chatContainer.classList.add("visible"); }, 10);
        setTimeout(() => userInput.focus(), 200);

        // Mostrar el mensaje inicial solo la primera vez
        if (!chatbotIniciado) {
            const mensajeInicial = `
                ¬°Hola! üëã Soy el asistente virtual de <b>SolarSur</b> ‚òÄÔ∏è<br><br>
                Te puedo ayudar con informaci√≥n y cotizaciones sobre nuestros productos:<br>
                <ul style="list-style: disc; padding-left: 20px;">
                    <li style="font-weight: bold;">Termas solares</li>
                    <li style="font-weight: bold;">Calentadores solares para piscina</li>
                    <li style="font-weight: bold;">Cocinas solares</li>
                    <li style="font-weight: bold;">Paneles solares</li>
                    <li style="font-weight: bold;">Sistemas de bombeo solar</li>
                    <li style="font-weight: bold;">Instalaci√≥n y mantenimiento</li>
                    <li style="font-weight: bold;">Y mucho m√°s...</li>
                </ul>
                ¬øSobre qu√© te gustar√≠a consultar primero? üòä
            `;
            addMessage(mensajeInicial, "chatbot");
            chatbotIniciado = true;
        }
    }
});


function addMessage(content, sender, isTyping = false) {
    if (sender === "user") {
        const wrapper = document.createElement("div");
        wrapper.classList.add("message-wrapper", "user-wrapper");

        const messageDiv = document.createElement("div");
        messageDiv.classList.add("message", "user");
        messageDiv.innerHTML = `<span class="message-text">${content}</span>`;

        const icon = document.createElement("img");
        icon.src = "usuario-chatbot.png";
        icon.alt = "Usuario";
        icon.className = "icono-usuario-chatbot";
        icon.style.marginTop = "16px";

        wrapper.appendChild(messageDiv);
        wrapper.appendChild(icon);

        chatMessages.appendChild(wrapper);
    } else {
        const messageDiv = document.createElement("div");
        messageDiv.classList.add("message", "chatbot");

        if (isTyping) {
            messageDiv.innerHTML = `
            <span class="message-text typing-indicator">
                <span></span><span></span><span></span>
            </span>
            `;
        } else {
            messageDiv.innerHTML = `<span class="message-text">${content}</span>`;
        }


        chatMessages.appendChild(messageDiv);
    }

    chatMessages.scrollTop = chatMessages.scrollHeight;
}


        sendBtn.addEventListener("click", () => {
            const userMessage = userInput.value.trim();
            if (userMessage) {
                addMessage(userMessage, "user");

                // Mostrar puntos suspensivos
                addMessage("...", "chatbot", true);

                // Esperar 2 segundos y luego reemplazarlo por la respuesta real
                setTimeout(() => {
                    // Elimina el √∫ltimo mensaje del chatbot (los puntos)
                    const mensajes = chatMessages.querySelectorAll(".message.chatbot");
                    if (mensajes.length > 0) {
                        mensajes[mensajes.length - 1].remove();
                    }

                    const botResponse = handleUserMessage(userMessage);
                    addMessage(botResponse, "chatbot");

                }, 1800);

                userInput.value = "";
            }
        });


    userInput.addEventListener("keypress", (event) => {
        if (event.key === "Enter") {
            event.preventDefault();
            sendBtn.click();
        }
    });
});

// Cierra el chat al hacer clic fuera
document.addEventListener("click", function(event) {
    const chatContainer = document.getElementById("chat-container");
    const chatButton = document.getElementById("chat-button");
    if (
        chatContainer.classList.contains("visible") &&
        !chatContainer.contains(event.target) &&
        !chatButton.contains(event.target)
    ) {
        chatContainer.classList.remove("visible");
        setTimeout(() => { chatContainer.style.display = "none"; }, 250);
    }
});
